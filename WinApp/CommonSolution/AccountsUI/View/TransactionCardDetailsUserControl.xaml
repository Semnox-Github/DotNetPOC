<UserControl x:Class="Semnox.Parafait.AccountsUI.TransactionCardDetailsUserControl"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
            xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
            xmlns:local="clr-namespace:Semnox.Parafait.AccountsUI"
            xmlns:customcontrols="clr-namespace:Semnox.Parafait.CommonUI;assembly=CommonUI"
            mc:Ignorable="d">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=local:TransactionCardDetailsUserControl}}"
                                   Command="{Binding LoadedCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid>
        <Border Background="{StaticResource Control.BackGround}"
                BorderBrush="{StaticResource Control.BorderBrush}"
                BorderThickness="0,0,0,3"
                VerticalAlignment="Top"
                CornerRadius="8">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0"
                      Margin="16"
                      Background="Transparent">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseUp">
                            <i:InvokeCommandAction Command="{Binding HeaderClickedCommand}" />
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <customcontrols:CustomTextBlock x:Name="tbCard"
                                                        Grid.Row="0"
                                                        Text="{Binding AccountDTO.TagNumber}"
                                                        FontWeight="{StaticResource FontWeight.Bold}"/>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <customcontrols:CustomTextBlock x:Name="tbStatusHeading"
                                                        Text="Status :"
                                                        Grid.Column="0"
                                                        HorizontalAlignment="Left"
                                                        TextTrimming="CharacterEllipsis"/>
                        <customcontrols:CustomTextBlock x:Name="tbStatus"
                                                        Margin="16,0,0,0"
                                                        HorizontalAlignment="Left"
                                                        TextTrimming="CharacterEllipsis"
                                                        Grid.Column="1"
                                                        FontWeight="{StaticResource FontWeight.Bold}"/>
                    </Grid>
                    <Grid Grid.Row="2"
                          Grid.Column="0"
                          Grid.ColumnSpan="3">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <customcontrols:CustomTextBlock x:Name="tbValidTill"
                                                        Text="{Binding DateTitle}"
                                                        Grid.Column="0"/>
                        <customcontrols:CustomTextBlock x:Name="tbDate"
                                                        HorizontalAlignment="Left"
                                                        Grid.Column="1"/>
                    </Grid>
                    <Button x:Name="btnDelete"
                            Grid.Column="1"
                            VerticalAlignment="Center"  
                            HorizontalAlignment="Right"
                            Grid.RowSpan="2"
                            Margin="8,0"
                            Command="{Binding DeleteCommand}">
                        <Button.Style>
                            <Style TargetType="{x:Type Button}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type Button}">
                                            <Border Background="Transparent">
                                                <Path x:Name="deletePath"
                                                      Data="M21.436 0c.789 0 1.48.285 2.05.845.507.499.794 1.1.851 1.787l.01.261v1.568h5.918c.349 0 .664.087.935.257l.158.112.147.132c.327.329.495.74.495 1.208 0 .452-.18.853-.52 1.181-.29.278-.634.441-1.019.482l-.196.01h-.24l.001 21.264c0 .618-.176 1.174-.523 1.655l-.16.201-.18.192c-.505.498-1.108.778-1.79.834l-.258.011H5.232c-.79 0-1.48-.285-2.05-.845-.507-.499-.794-1.1-.851-1.787l-.011-.261-.001-21.264h-.62c-.332 0-.637-.086-.903-.256L.64 7.475l-.146-.131C.17 7.015 0 6.61 0 6.153c0-.458.169-.863.495-1.191.281-.283.623-.448 1.008-.49l.197-.01L7.65 4.46l.001-1.568c0-.617.172-1.171.51-1.651l.156-.202.176-.192c.497-.5 1.104-.781 1.803-.837L10.564 0h10.872zm5.225 7.843H5.685v20.81H26.66V7.842zM12.367 11.12c.415 0 .781.139 1.058.388l.113.114c.299.273.474.615.518 1.006l.01.2V24.47c0 .468-.168.88-.495 1.209-.327.33-.738.5-1.204.5-.467 0-.877-.17-1.205-.5-.28-.282-.444-.625-.485-1.012l-.01-.197V12.828c0-.468.168-.88.495-1.208.328-.33.738-.5 1.205-.5zm8 0c.415 0 .781.139 1.058.388l.113.114c.299.273.474.615.518 1.006l.01.2V24.47c0 .468-.168.88-.495 1.209-.327.33-.738.5-1.204.5-.467 0-.877-.17-1.205-.5-.28-.282-.444-.625-.485-1.012l-.01-.197V12.828c0-.468.168-.88.495-1.208.328-.33.738-.5 1.205-.5zm.614-7.739h-9.999v1.08h10V3.38z"
                                                      Fill="{StaticResource Control.BorderBrush.Focused}"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <!-- added by prashanth-->
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsDeleteButtonVisible}" Value="false">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                                <!-- ended by prashanth-->
                            </Style>
                        </Button.Style>
                    </Button>
                    <ToggleButton x:Name="btnExpand"
                                  Grid.Column="2"
                                  VerticalAlignment="Center"  
                                  HorizontalAlignment="Right"
                                  Grid.RowSpan="2"
                                  IsChecked="{Binding Expand}">
                        <ToggleButton.Style>
                            <Style TargetType="{x:Type ToggleButton}">
                                <Setter Property="Height"
                                        Value="{StaticResource Icon.Small.Height}"/>
                                <Setter Property="Width"
                                        Value="{Binding ActualHeight,RelativeSource={RelativeSource Mode=Self}}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type ToggleButton}">
                                            <Border Background="Transparent"
                                                    BorderBrush="{StaticResource Control.BorderBrush.Focused}"
                                                    BorderThickness="3"
                                                    Padding="6"
                                                    CornerRadius="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Width}">
                                                <Path x:Name="arrow" 
                                                      Grid.Column="1"
                                                      Data="M 1,1.5 L 4.5,5 L 8,1.5" 
                                                      HorizontalAlignment="Center"
                                                      Stroke="{StaticResource Control.BorderBrush.Focused}" 
                                                      StrokeThickness="2" 
                                                      VerticalAlignment="Center"
                                                      Stretch="Uniform"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsChecked" 
                                                         Value="true">
                                                    <Setter Property="Data" 
                                                            TargetName="arrow"
                                                            Value="M 1,4.5  L 4.5,1  L 8,4.5"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ToggleButton.Style>
                    </ToggleButton>
                </Grid>
                <Border Grid.Row="1"
                        BorderThickness="0,1,0,0"
                        BorderBrush="{StaticResource Control.BorderBrush}"
                        Padding="16">
                    <Border.Style>
                        <Style TargetType="{x:Type Border}">
                            <Setter Property="Visibility"
                                    Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsChecked,ElementName=btnExpand}"
                                             Value="True">
                                    <Setter Property="Visibility"
                                            Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <UniformGrid Rows="5"
                                 Columns="2"
                                 Grid.Column="1">
                        <UniformGrid Rows="2"
                                     x:Name="CreditUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                           Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbCreditsHeader"
                                                            Text="Credits"
                                                            TextSize="XSmall"
                                                            TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbCreditsValue"
                                                            TextTrimming="CharacterEllipsis"
                                                            FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                     x:Name="TicketsUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                           Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbTickets"
                                                            Text="Tickets"
                                                            TextSize="XSmall"
                                                            TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbTicketsValue"
                                                            TextTrimming="CharacterEllipsis"
                                                            FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                    x:Name="TimeUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                           Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbTimeHeader"
                                                            Text="Time"
                                                            TextSize="XSmall"
                                                            TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbTimeValue"
                                                            TextTrimming="CharacterEllipsis"
                                                            FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                 x:Name="GameUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                           Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbGameHeader"
                                                            Text="Games"
                                                            TextSize="XSmall"
                                                            TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbGameValue"
                                                            Text="{Binding AccountDTO.AccountSummaryDTO.AccountGameBalance}"
                                                            TextTrimming="CharacterEllipsis"
                                                            FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                    x:Name="PointsUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbPointsHeader"
                                                        Text="Loyalty Points"
                                                        TextWrapping="Wrap"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbPointsValue"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                 x:Name="PlayCreditsUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbPlayCreditsHeader"
                                                        Text="Play Credits"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbPlayCreditsValue"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>

                        <UniformGrid Rows="2"
                                 x:Name="CounterItemsUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbCounterItemsHeader"
                                                        Text="Counter Items"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbCounterItemsValue"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>

                        <UniformGrid Rows="2"
                                 x:Name="BonusUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbBonusHeader"
                                                        Text="Bonus"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbBonusValue"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                 x:Name="CourtesyUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbCourtesyHeader"
                                                        Text="Courtesy"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbCourtesyValue"
                                                        Text="{Binding AccountDTO.Courtesy,StringFormat={}{0:0}}"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                        <UniformGrid Rows="2"
                                 x:Name="CardDeposittUniformGrid">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseDown">
                                    <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=UniformGrid}}"
                                                       Command="{Binding CardDetailClickedCommand}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <customcontrols:CustomTextBlock x:Name="tbCardDeposit"
                                                        Text="Card Deposit"
                                                        TextSize="XSmall"
                                                        TextTrimming="CharacterEllipsis" />
                            <customcontrols:CustomTextBlock x:Name="tbCardDepositValue"
                                                        TextTrimming="CharacterEllipsis"
                                                        FontWeight="{StaticResource FontWeight.Bold}" />
                        </UniformGrid>
                    </UniformGrid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>
