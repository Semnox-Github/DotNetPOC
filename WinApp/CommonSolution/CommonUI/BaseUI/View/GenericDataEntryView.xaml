<Window x:Class="Semnox.Parafait.CommonUI.GenericDataEntryView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:local="clr-namespace:Semnox.Parafait.CommonUI"
        mc:Ignorable="d"
        Style="{StaticResource PopupWindowStyle}"
        Title="GenericDataEntryView">
    <Grid x:Name="MainGrid"
          MinWidth="500"
          MaxWidth="{Binding MinWidth,RelativeSource={RelativeSource Mode=Self}}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="2.6*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <local:CustomTextBlock x:Name="lblHeader"
                               Grid.Row="0"
                               Text="{Binding Heading}"
                               TextSize="Medium"
                               FontWeight="{StaticResource FontWeight.Bold}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Margin="16" />
        <Border Grid.Row="1"
                Height="3"
                Background="{StaticResource Control.ComboBackground}"
                BorderThickness="1"
                VerticalAlignment="Top" />
        <local:CustomScrollViewer x:Name="scvContentArea"
                                  Grid.Row="1"
                                  CanContentScroll="True"
                                  HorizontalScrollBarVisibility="Disabled"
                                  VerticalScrollBarVisibility="Auto"
                                  Margin="16">
            <Grid Margin="0,0,12,0">
                <StackPanel CanHorizontallyScroll="True"
                            CanVerticallyScroll="True"
                            Name="ParentGrid"
                            Orientation="Vertical">
                    <ItemsControl ItemsSource="{Binding DataEntryCollections}"
                                  x:Name="ContentItemsControl">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Vertical" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <ContentControl Content="{Binding}">
                                    <ContentControl.Style>
                                        <Style TargetType="{x:Type ContentControl}">
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <local:CustomTextBox Heading="{Binding Heading}"
                                                                             DefaultValue="{Binding DefaultValue}"
                                                                             ErrorMessage="{Binding ErrorMessage}"
                                                                             Text="{Binding Path= Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                             ValidationType="{Binding ValidationType}"
                                                                             Size="{Binding Size}"
                                                                             IsReadOnly="{Binding IsReadOnly}"
                                                                             IsEnabled="{Binding IsEnabled}"
                                                                             IsMandatory="{Binding IsMandatory}"
                                                                             IsMasked="{Binding IsMasked}"
                                                                             NumberKeyboardType="{Binding NumberKeyboardType}"/>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=Type}"
                                                             Value="ComboBox">
                                                    <Setter Property="ContentTemplate">
                                                        <Setter.Value>
                                                            <DataTemplate>
                                                                <local:CustomComboBox ItemsSource="{Binding Options}"
                                                                                      DisplayMemberPath="{Binding DisplayMemberPath}"
                                                                                      IsMandatory="{Binding IsMandatory}"
                                                                                      DefaultValue="{Binding DefaultValue}"
                                                                                      SelectedItem="{Binding SelectedItem}"
                                                                                      Heading="{Binding Heading}"
                                                                                      IsEditable="{Binding IsEditable}"
                                                                                      IsReadOnly="{Binding IsReadOnly}"
                                                                                      IsEnabled="{Binding IsEnabled}"
                                                                                      Size="{Binding Size}" />
                                                            </DataTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=Type}"
                                                             Value="NumericUpDown">
                                                    <Setter Property="ContentTemplate">
                                                        <Setter.Value>
                                                            <DataTemplate>
                                                                <local:CustomNumericUpDown NumericButtonType="{Binding NumericButtonType}"
                                                                                           Value="{Binding NumericUpDownValue}"
                                                                                           MaxValue="{Binding NumericUpDownMaxValue}"
                                                                                           MinValue="{Binding NumericUpDownMinValue}"
                                                                                           NumberKeyboardType="{Binding NumberKeyboardType}">
                                                                    <i:Interaction.Triggers>
                                                                        <i:EventTrigger EventName="DeleteButtonClicked">
                                                                            <i:InvokeCommandAction CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType = local:GenericDataEntryView}}"
                                                                                                   Command="{Binding DataContext.NumericDeletedCommand, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=local:GenericDataEntryView}}">
                                                                            </i:InvokeCommandAction>
                                                                        </i:EventTrigger>
                                                                    </i:Interaction.Triggers>
                                                                </local:CustomNumericUpDown>
                                                            </DataTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=Type}"
                                                             Value="CheckBox">
                                                    <Setter Property="ContentTemplate">
                                                        <Setter.Value>
                                                            <DataTemplate>
                                                                <local:CustomCheckBox Heading="{Binding Heading}"
                                                                                      IsMandatory="{Binding IsMandatory}"
                                                                                      IsChecked="{Binding IsChecked}"
                                                                                      Content="{Binding Path= Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                                      IsEnabled="{Binding IsEnabled}"
                                                                                      Size="{Binding Size}"/>
                                                            </DataTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=Type}"
                                                             Value="DatePicker">
                                                    <Setter Property="ContentTemplate">
                                                        <Setter.Value>
                                                            <DataTemplate>
                                                                <local:CustomTextBoxDatePicker Heading="{Binding Heading}"
                                                                                               DefaultValue="{Binding DefaultValue}"
                                                                                               ErrorMessage="{Binding ErrorMessage}"
                                                                                               ErrorState="{Binding ErrorState}"
                                                                                               ShowTimePicker="{Binding ShowTimePicker}"
                                                                                               DisablePastDates="{Binding DisablePastDates}"
                                                                                               ValidationType="{Binding DatePickerValidationType}"
                                                                                               Text="{Binding Text}"
                                                                                               Size="{Binding Size}"
                                                                                               IsReadOnly="{Binding IsReadOnly}"
                                                                                               IsEnabled="{Binding IsEnabled}"
                                                                                               IsMandatory="{Binding IsMandatory}"/>
                                                            </DataTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </ContentControl.Style>
                                </ContentControl>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Grid>
        </local:CustomScrollViewer>
        <Border Grid.Row="2"
                BorderBrush="{StaticResource Control.ComboBackground}"
                BorderThickness="0,1,0,0"
                VerticalAlignment="Top">
            <Grid Margin="16,8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Bottom"
                            Grid.Column="0"
                            Grid.ColumnSpan="2">
                    <local:CustomActionButton x:Name="btnCancel"
                                              Width="{StaticResource ActionButton.Width}"
                                              CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
                                              Command="{Binding CancelCommand}"
                                              ActionStyle="Passive"
                                              Content="CANCEL" />
                    <local:CustomActionButton x:Name="btnOK"
                                              Width="{StaticResource ActionButton.Width}"
                                              Margin="{StaticResource OkAndYearMargin}"
                                              CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}"
                                              Command="{Binding OkCommand}"
                                              Content="{Binding OkButtonContent}" />
                </StackPanel>
                <Button Grid.Column="1"
                        VerticalAlignment="Bottom"
                        x:Name="btnKeyBoard">
                    <Button.Style>
                        <Style TargetType="{x:Type Button}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type Button}">
                                        <Border x:Name="border"
                                                BorderBrush="{StaticResource Control.BorderBrush}"
                                                BorderThickness="0,0,0,3"
                                                CornerRadius="{StaticResource CornerRadius}"
                                                Background="{TemplateBinding Background}">
                                            <Grid Margin="12"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center">
                                                <Path Data="M0 0H54V32H0z" />
                                                <Path Data="M50.4 32c1.997 0 3.6-1.583 3.6-3.556V3.556C54 1.583 52.397 0 50.4 0H3.6C1.603 0 0 1.583 0 3.556v24.888C0 30.417 1.603 32 3.6 32h46.8zm0-3.556H3.6V3.556h46.8v24.888zM10.35 10.667c.253 0 .45-.195.45-.445V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.195.45-.445V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.195.45-.445V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.195.45-.445V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.195.45-.445V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 7.11c.253 0 .45-.194.45-.444V7.556c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v6.666h-3.15c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h6.3zm-32.4 0c.253 0 .45-.194.45-.444v-2.666c0-.25-.197-.445-.45-.445h-6.3c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h6.3zm7.2 0c.253 0 .45-.194.45-.444v-2.666c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.194.45-.444v-2.666c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm7.2 0c.253 0 .45-.194.45-.444v-2.666c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm-25.2 7.112c.253 0 .45-.195.45-.445v-2.666c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7zm28.8 0c.253 0 .45-.195.45-.445v-2.666c0-.25-.197-.445-.45-.445h-24.3c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h24.3zm7.2 0c.253 0 .45-.195.45-.445v-2.666c0-.25-.197-.445-.45-.445h-2.7c-.253 0-.45.195-.45.445v2.666c0 .25.197.445.45.445h2.7z"
                                                      Fill="{StaticResource Control.BorderBrush.Focused}" />
                                            </Grid>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsKeyboardVisible}"
                                             Value="False">
                                    <Setter Property="Visibility"
                                            Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>
